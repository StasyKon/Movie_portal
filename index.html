<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    <title>Мир Кино</title>
</head>

<body class="bg-light">
    <div class="container d-flex flex-column shadow-sm bg-white">
        <header>
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                            <button id="add-new" class="btn btn-outline-primary" type="button">Добавить новый</button>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link all-movies" href="#list">Все фильмы</a>
                        </li>
                    </ul>
                    <form class="form-inline my-2 my-lg-0">
                        <input class="form-control mr-sm-2" type="search" name="query" placeholder="Поиск..." aria-label="Search">
                        <button class="search btn btn-outline-success my-2 my-sm-0" type="submit">
                            <svg class="octicon octicon-search" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                                <path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
                            </button>
                    </form>
                </div>
            </nav>
        </header>
        <main id="content" class="d-flex flex-wrap justify-content-around align-items-start align-content-start">
            <!-- <h1 class="mt-5 text-center text-uppercase">Добро пожаловать<br> на портал Мир Кино!</h1> -->
        </main>
        <footer class="text-center my-5">
            <h6 class="mb-0">Мир Кино | © 2019</h6>
        </footer>
    </div>
    <link rel="stylesheet" href="./movie.html">

    <script type="text/template" id="preview">
        <h1 class="mt-5 text-center text-uppercase">Добро пожаловать<br> на портал Мир Кино!</h1>
    </script>

    <script type="text/template" id="movie-list">
        <div class="movie-details">
            <div class="my-5">
                <h1 class="my-0">
                    <%-data.title%>
                </h1>
                <h4 class="my-0">
                    <%-data.originTitle%>
                </h4>
            </div>
            <div class="row">
                <div class="col-sm-3">
                    <img class="img-fluid" src='<%-data.imgSRC%>' alt="<%-data.title%>">
                    <div class="text-center mt-2">
                        <button type="button" class="btn btn-text btn-plus" data-count="<%-data.countPlus%>">
                      <svg height="32" class="octicon octicon-thumbsup" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M15.98 8.17l-.97 5.95C14.84 15.5 13.13 16 12 16H5.69c-.2 0-.38-.05-.53-.14L3.72 15H2c-1.06 0-2-.94-2-2V9c0-1.06.94-2.02 2-2h2c.91 0 1.39-.45 2.39-1.55.91-1 .88-1.8.63-3.27-.08-.5.06-1 .42-1.42C7.83.29 8.42 0 9 0c1.83 0 3 3.71 3 5.01l-.02.98h2.04c1.16 0 1.95.8 1.98 1.97 0 .11-.02.21-.02.21zm-1.97-1.19h-1.99c-.7 0-1.03-.28-1.03-.97l.03-1.03c0-1.27-1.17-4-2-4-.5 0-1.08.5-1 1 .25 1.58.34 2.78-.89 4.14C6.11 7.25 5.36 8 4 8v6l1.67 1H12c.73 0 1.95-.31 2-1l.02-.02 1-6c-.03-.64-.38-1-1-1h-.01z"></path></svg>
                    </button>
                        <button type="button" class="btn btn-text btn-minus" data-count="<%-data.countMinus%>">
                      <svg height="32" class="octicon octicon-thumbsdown" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M15.98 7.83l-.97-5.95C14.84.5 13.13 0 12 0H5.69c-.2 0-.38.05-.53.14L3.72 1H2C.94 1 0 1.94 0 3v4c0 1.06.94 2.02 2 2h2c.91 0 1.39.45 2.39 1.55.91 1 .88 1.8.63 3.27-.08.5.06 1 .42 1.42.39.47.98.76 1.56.76 1.83 0 3-3.71 3-5.01l-.02-.98h2.04c1.16 0 1.95-.8 1.98-1.97 0-.11-.02-.21-.02-.21zm-1.97 1.19h-1.99c-.7 0-1.03.28-1.03.97l.03 1.03c0 1.27-1.17 4-2 4-.5 0-1.08-.5-1-1 .25-1.58.34-2.78-.89-4.14C6.11 8.75 5.36 8 4 8V2l1.67-1H12c.73 0 1.95.31 2 1l.02.02 1 6c-.03.64-.38 1-1 1h-.01z"></path></svg>
                    </button>
                    </div>
                </div>
                <div class="col-sm-6">
                    <ul class="movie-info pl-0">
                        <li class="d-flex">
                            <p class="col-3">год</p>
                            <p class="col-9">
                                <%-data.year%>
                            </p>
                        </li>
                        <li class="d-flex">
                            <p class="col-3">страна</p>
                            <p class="col-9">
                                <%-data.country%>
                            </p>
                        </li>
                        <li class="d-flex">
                            <p class="col-3">слоган</p>
                            <p class="col-9">
                                <%-data.tagline%>
                            </p>
                        </li>
                        <li class="d-flex">
                            <p class="col-3">режиссер</p>
                            <p class="col-9">
                                <%-data.director%>
                            </p>
                        </li>
                        <% if (data.creators) {data.creators.forEach(item => { %>
                            <li class="d-flex">
                                <p class="col-3">
                                    <%-item.role%>
                                </p>
                                <p class="col-9">
                                    <%-item.name%>
                                </p>
                            </li>
                            <% })};%>
                    </ul>
                    <div class="movie-description mt-5">
                        <p class="font-weight-bold">IMDb:
                            <%-data.IMDb%>
                        </p>
                        <p>
                            <%-data.description%>
                        </p>
                    </div>
                </div>
                <div class="col-sm-3">
                    <h3>В ролях:</h3>
                    <ul class="list-unstyled">
                        <% if (data.actors) {data.actors.forEach(function(item) { %>
                            <li>
                                <%-item%>
                            </li>
                            <% })}; %>
                    </ul>
                </div>
            </div>
        </div>
    </script>

    <script type="text/template" id="card">
        <div class="card mt-3" style="max-width: 48%;">
            <div class="row no-gutters">
                <div class="col-md-4">
                    <img src='<%-data.imgSRC%>' class="card-img" alt="<%-data.title%>">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%-data.title%>
                        </h5>
                        <p class="card-text">
                            <%-data.description%>
                        </p>
                        <p class="card-text"><small class="text-muted font-weight-bold">IMDb: <%-data.IMDb%></small></p>
                        <div class="card-text"><a href="#list-<%-data.id%>" id="<%-data.id%>" class="more">Подробнее...</a></div>
                    </div>
                </div>
                <div class="card-footer">
                    <button class="btn btn-sm btn-outline-primary btn-edit" id="<%-data.id%>">
                        <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path></svg>
                    </button>
                    <button class="btn btn-sm btn-outline-danger btn-delete" id="<%-data.id%>">
                        <svg class="octicon octicon-x" viewBox="0 0 14 18" version="1.1" width="14" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </script>

    <script type="text/template" id="modal">
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="myModalLabel">Добавить новый фильм</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                    </div>
                    <div class="modal-body">
                        <form class="w-75 mx-auto movie-form" id="movie-form">
                            <div class="form-group">
                                <label>Название фильма:</label>
                                <input type="text" id="title" class="form-control" value="<%-data ? data.title : ''%>">
                            </div>
                            <div class="form-group">
                                <label>Оригинальное название фильма:</label>
                                <input type="text" id="originTitle" class="form-control" value="<%-data ? data.originTitle : ''%>">
                            </div>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="upload-poster-addon">Постер</span>
                                </div>
                                <div class="custom-file">
                                    <input type="file" id="imgSRC" class="custom-file-input" id="upload-poster" aria-describedby="upload-poster-addon" value="<%-data ? data.imgSRC : ''%>">
                                    <label class="custom-file-label" for="upload-poster">Выберите файл</label>
                                </div>
                            </div>
                            <fieldset class="form-group">
                                <legend class="col-form-label pt-0">Детальная информация:</legend>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Год:</label>
                                    <div class="col-sm-10">
                                        <input type="text" id="year" class="form-control" value="<%-data ? data.year : ''%>">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Страна:</label>
                                    <div class="col-sm-10">
                                        <input type="text" id="country" class="form-control" value="<%-data ? data.country : ''%>">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Слоган:</label>
                                    <div class="col-sm-10">
                                        <input type="text" id="tagline" class="form-control" value="<%-data ? data.tagline : ''%>">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label">Режиссер:</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="director" class="form-control" value="<%-data ? data.director : ''%>">
                                    </div>
                                    <div class="col-sm-2">
                                        <button class="btn btn-primary btn-add-field" type="button">
                                            <svg class="octicon octicon-plus" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5v2z"></path></svg>
                                        </button>
                                    </div>
                                </div>
                                <% if (data) {data.creators.map(item => {%>
                                    <div class="form-group row extra-field new-field" id="<%-item.id%>">
                                        <div class="col-sm-5">
                                            <input type="text" id="extraPosition" class="form-control extra-input" placeholder="Должность" value="<%-item.role%>">
                                        </div>
                                        <div class="col-sm-5">
                                            <input type="text" id="extraName" class="form-control extra-input" placeholder="Имя" value="<%-item.name%>">
                                        </div>
                                        <div class="col-sm-2">
                                            <button class="btn btn-danger btn-sm btn-remove-field" type="button">
                                                <svg class="octicon octicon-x" viewBox="0 0 14 18" version="1.1" width="14" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
                                            </button>
                                        </div>
                                    </div>
                                    <% })} else {%>
                                        <div class="form-group row extra-field" id="field0">
                                            <div class="col-sm-5">
                                                <input type="text" id="extraPosition" class="form-control extra-input" placeholder="Должность">
                                            </div>
                                            <div class="col-sm-5">
                                                <input type="text" id="extraName" class="form-control extra-input" placeholder="Имя">
                                            </div>
                                            <div class="col-sm-2">
                                                <button class="btn btn-danger btn-sm btn-remove-field" type="button">
                                                    <svg class="octicon octicon-x" viewBox="0 0 14 18" version="1.1" width="14" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
                                                </button>
                                            </div>
                                        </div>
                                        <% }%>
                            </fieldset>
                            <div class="form-group">
                                <label>В ролях:</label>
                                <textarea class="form-control" id="actors" rows="3"><%-data ? data.actors : ''%></textarea>
                                <small class="form-text text-muted">Укажите актеров через запятую.</small>
                            </div>
                            <div class="form-group">
                                <label>Рейтинг IMDB:</label>
                                <input type="text" id="IMDb" class="form-control" value="<%-data ? data.IMDb : ''%>">
                            </div>
                            <div class="form-group">
                                <label>Описание:</label>
                                <textarea class="form-control" id="description" rows="3"><%-data ? data.description : ''%></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Отменить</button>
                        <button type="submit" class="btn btn-primary mr-3 btn-add-movie" form="movie-form">Сохранить</button>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"></script>
    <!-- <script src="src/index.js"></script> -->
    <script src="dist/bundle.js"></script>
</body>

</html>